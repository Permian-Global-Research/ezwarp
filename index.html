<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="The goal of ezwarp is to simplify the use of gdalwarp in R. 
    gdalwarp is a very powerful and fast Image reprojection and warping utility. 
    It can be used to reproject (i.e. transform to a new Coordinate Reference 
    System), crop, mask and resample. Unlike many tools in R, this can all be done 
    in a single command, using the warp tool, saving time and code.">
<title>A utility tool for working with gdal warp in R • ezwarp</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A utility tool for working with gdal warp in R">
<meta property="og:description" content="The goal of ezwarp is to simplify the use of gdalwarp in R. 
    gdalwarp is a very powerful and fast Image reprojection and warping utility. 
    It can be used to reproject (i.e. transform to a new Coordinate Reference 
    System), crop, mask and resample. Unlike many tools in R, this can all be done 
    in a single command, using the warp tool, saving time and code.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">ezwarp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.01</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Permian-Global-Research/ezwarp/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p><br></p>
<p><img src="https://avatars.githubusercontent.com/u/106586419?s=400&amp;u=69fb140fd7d3f204f361e85dba7398ac33d88a03&amp;v=4" align="right" height="10%" width="10%"></p>
<div class="section level1">
<div class="page-header"><h1 id="ezwarp">ezwarp<a class="anchor" aria-label="anchor" href="#ezwarp"></a>
</h1></div>
<p><img align="right" width="250" src="inst/figures/ezwarp-hex.png"></p>
<!-- badges: start -->

<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>The goal of ezwarp is to simplify the use of <a href="https://gdal.org/programs/gdalwarp.html" class="external-link">gdalwarp</a> in R. Gdal warp is a very powerful and fast Image reprojection and warping utility. It can be used to reproject (i.e. transform to a new Coordinate Reference System), crop, mask and resample. Unlike many tools in R, this can all be done in a single command, using the warp tool, saving time and code.</p>
<p>At present, there are many ways to access the functionality of gdalwarp in R. These include:</p>
<ul>
<li><a href="https://hypertidy.github.io/vapour/reference/vapour_warp_raster.html" class="external-link">vapour::warp_raster</a></li>
<li><a href="https://r-spatial.github.io/sf/reference/gdal_utils.html" class="external-link">sf::gdal_utils</a></li>
<li><a href="https://r-spatial.github.io/stars/reference/st_warp.html" class="external-link">stars::st_warp</a></li>
<li><a href="https://github.com/hypertidy/gdalio" class="external-link">{gdalio}</a></li>
<li><a href="https://rspatial.github.io/terra/reference/project.html" class="external-link">terra::project</a></li>
<li><a href="https://hypertidy.github.io/whatarelief/" class="external-link">{whatarelief}</a></li>
<li>system(“gdalwarp …”)</li>
</ul>
<p>Some of these packages/functions (perhaps sensibly) restrict certain functionality of gdalwarp to make specific tasks much simpler (e.g. ‘terra::project’ allows only a single input source).</p>
<p>There are two warp “engines” provided in <em>ezwarp</em>: vapour (the default) and sf. The advantage of vapour is that it supports direct-to-memory read of raster data so no need to store intermediate tif files. However, when things get large, it can be problematic to load the entire dataset into memory, in which case sf may be more suitable.</p>
<p><em>ezwarp</em> provides simple access to the majority of gdalwarp’s functionality in a simplified API that allows users to focus on the task at hand rather than the disperate classes (and their conversions) that exist in the r spatial ecosystem.</p>
<p>To warp a raster dataset, gdalwarp requires an extent, a dimension and a projection. This can be defined in ezwarp manually using an <code>ezgrid</code> class object which is a very simple s3 object comprising those three key variables (created with <code><a href="reference/ezgrid.html">ezgrid()</a></code>). However, estimating raster dimensions can be unintuitive and is a step removed from the required spatial context on the ground. So, ezwarp provides a resolution argument (<code>res</code>) which can be used with an ezgrid object (with or without missing dimension value) or any of the following R spatial classes: SpatRaster, SpatVector, sf, sfc, stars. In addition, ezwarp also supports file paths and URLs for valid spatial files (it’s gdal after all).</p>
<p>terra, sf and stars are the best supported and most popular spatial packages in the R ecosystem. <em>ezwarp</em> aims to support these types along with vector and matrix classes (as output formats only). Further spatial (or indeed non-spatial) classes may be supported in the future.</p>
</div>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"Permian-Global-Research/ezwarp"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h3>
<p>A very simple example, defining the grid manually with <code>ezgrid</code>. Here we use the excellent <a href="https://www.gebco.net/data_and_products/gridded_bathymetry_data/gebco_2021/" class="external-link">GEBCO elevation</a> dataset via the <a href="https://data.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF" class="external-link">Australian Antarctic Data Centre</a>’s Cloud optimized Geotiff (COG). Now, clearly downloading at full resolution would take forever. So, using gdalwarp we can resample to a more modest resolution - in this case 0.5 degrees - by manually setting the dimension.</p>
<p>Note that the output can be either a SpatRaster or stars object. Also, see that a general plotting function <code>sciplot</code> is provided to make use of the great scientific colour palettes provided in the <a href="https://github.com/thomasp85/scico" class="external-link">{scico}</a> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Permian-Global-Research/ezwarp" class="external-link">ezwarp</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="va">template</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezgrid.html">ezgrid</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">180</span>, <span class="fl">180</span>, <span class="op">-</span><span class="fl">90</span>, <span class="fl">90</span><span class="op">)</span>,</span>
<span>  dimension <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">720</span>, <span class="fl">360</span><span class="op">)</span>,</span>
<span>  projection <span class="op">=</span> <span class="st">"EPSG:4326"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">src</span> <span class="op">&lt;-</span> <span class="st">"/vsicurl/https://public.services.aad.gov.au/datasets/science/GEBCO_2021_GEOTIFF/GEBCO_2021.tif"</span></span>
<span></span>
<span><span class="va">world.el.terra</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">src</span>, y <span class="op">=</span> <span class="va">template</span><span class="op">)</span></span>
<span><span class="va">world.el.stars</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">src</span>, y <span class="op">=</span> <span class="va">template</span>, out_class <span class="op">=</span> <span class="st">"stars"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/sciplot.html">sciplot</a></span><span class="op">(</span><span class="va">world.el.terra</span>, pal <span class="op">=</span> <span class="st">"bukavu"</span>, centre <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/sciplot.html">sciplot</a></span><span class="op">(</span><span class="va">world.el.stars</span>, pal <span class="op">=</span> <span class="st">"oleron"</span>, n <span class="op">=</span> <span class="fl">256</span>, centre <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-simple-world-1.png" width="50%"><img src="reference/figures/README-simple-world-2.png" width="50%"></p>
<p>The <code>cutline</code> argument can be used to mask regions with a input spatial vector. Here we demonstrate this by using an online geojson of Madagascar from the <a href="https://www.geoboundaries.org/downloadCGAZ.html" class="external-link">geoboundaries database</a> directly. Note also that we reuse the source as the target <code>y</code> but set the <code>res</code> argument to 0.5 to make sure we rescale the grid. We also specify <code>crop_to_cutline = TRUE</code> otherwise the extent will default to that defined by <code>y</code>. In this example, the ‘sf’ warp <code>engine</code> is used rather than ‘vapour’.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">madagascar</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/wmgeolab/geoBoundariesArchive_4_0_0/raw/299e00623ece6c03bcb9a751eda6094b1eac85a6/releaseData/gbOpen/MDG/ADM0/geoBoundaries-MDG-ADM0.geojson"</span></span>
<span></span>
<span><span class="va">world.el.mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">src</span>, y <span class="op">=</span> <span class="va">src</span>, res <span class="op">=</span> <span class="fl">0.1</span>, cutline <span class="op">=</span> <span class="va">madagascar</span>,</span>
<span>  crop_to_cutline <span class="op">=</span> <span class="cn">TRUE</span>, engine <span class="op">=</span> <span class="st">"sf"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/sciplot.html">sciplot</a></span><span class="op">(</span><span class="va">world.el.mask</span>, pal <span class="op">=</span> <span class="st">"lapaz"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-mask-world-1.png" width="100%"></p>
<p>We can also pass additional arguments to gdalwarp using the options command - See here the <a href="https://gdal.org/programs/gdalwarp.html" class="external-link">gdalwarp docs</a>. Here we pass an sql query for the cutline feature specifying that we only want to use Stokes County (from the nc dataset in sf). Also the crop_to_cutline argument is used here to limit the extent to the specified cropline feature. This example also demonstrates how ezwarp handles multiple bands, in this case with the esri satellite WMS layer. By default, all bands are read - this can be changed with the <code>bands</code> argument.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">esri_sat</span> <span class="op">&lt;-</span> <span class="st">"&lt;GDAL_WMS&gt;&lt;Service name=\"TMS\"&gt;&lt;ServerUrl&gt;http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/${z}/${y}/${x}&lt;/ServerUrl&gt;&lt;/Service&gt;&lt;DataWindow&gt;&lt;UpperLeftX&gt;-20037508.34&lt;/UpperLeftX&gt;&lt;UpperLeftY&gt;20037508.34&lt;/UpperLeftY&gt;&lt;LowerRightX&gt;20037508.34&lt;/LowerRightX&gt;&lt;LowerRightY&gt;-20037508.34&lt;/LowerRightY&gt;&lt;TileLevel&gt;17&lt;/TileLevel&gt;&lt;TileCountX&gt;1&lt;/TileCountX&gt;&lt;TileCountY&gt;1&lt;/TileCountY&gt;&lt;YOrigin&gt;top&lt;/YOrigin&gt;&lt;/DataWindow&gt;&lt;Projection&gt;EPSG:900913&lt;/Projection&gt;&lt;BlockSizeX&gt;256&lt;/BlockSizeX&gt;&lt;BlockSizeY&gt;256&lt;/BlockSizeY&gt;&lt;BandsCount&gt;3&lt;/BandsCount&gt;&lt;MaxConnections&gt;10&lt;/MaxConnections&gt;&lt;Cache /&gt;&lt;/GDAL_WMS&gt;"</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"gpkg"</span>, <span class="st">"nc.gpkg"</span>, package <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nc.mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">esri_sat</span>, y <span class="op">=</span> <span class="va">esri_sat</span>, res <span class="op">=</span> <span class="fl">100</span>, cutline <span class="op">=</span> <span class="va">f</span>,</span>
<span>  crop_to_cutline <span class="op">=</span> <span class="cn">TRUE</span>, nodata <span class="op">=</span> <span class="op">-</span><span class="fl">99</span>, engine <span class="op">=</span> <span class="st">"sf"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">jackson.mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">esri_sat</span>, y <span class="op">=</span> <span class="va">esri_sat</span>, res <span class="op">=</span> <span class="fl">25</span>, cutline <span class="op">=</span> <span class="va">f</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-csql"</span>, <span class="st">"SELECT * FROM 'nc.gpkg' WHERE NAME = 'Jackson'"</span><span class="op">)</span>,</span>
<span>  crop_to_cutline <span class="op">=</span> <span class="cn">TRUE</span>, nodata <span class="op">=</span> <span class="op">-</span><span class="fl">99</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">f_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fu">vapour</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/vapour/man/vapour_raster_info.html" class="external-link">vapour_raster_info</a></span><span class="op">(</span><span class="va">esri_sat</span><span class="op">)</span><span class="op">$</span><span class="va">projection</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plotRGB.html" class="external-link">plotRGB</a></span><span class="op">(</span><span class="va">nc.mask</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">f_sf</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, border <span class="op">=</span> <span class="st">"grey90"</span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plotRGB.html" class="external-link">plotRGB</a></span><span class="op">(</span><span class="va">jackson.mask</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">f_sf</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, border <span class="op">=</span> <span class="st">"grey10"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-mask-che-1.png" width="50%"><img src="reference/figures/README-mask-che-2.png" width="50%"></p>
<p>This example is just to illustrate that <em>ezwarp</em> can handle differing inputs as sources - url/filepath/SpatRaster/stars and can use all of these along with sf/sfc/SpatVector/ezgrid as a target (y) too.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nc_sub1</span> <span class="op">&lt;-</span> <span class="va">f_sf</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span></span>
<span><span class="va">nc_sub2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">f_sf</span><span class="op">[</span><span class="fl">90</span><span class="op">:</span><span class="fl">100</span>, <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nc_sub1.terra</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">src</span>, y <span class="op">=</span> <span class="va">nc_sub1</span>, res <span class="op">=</span> <span class="fl">100</span>, cutline <span class="op">=</span> <span class="va">nc_sub1</span>,</span>
<span>  crop_to_cutline <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">nc_sub2.stars</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">src</span>, y <span class="op">=</span> <span class="va">nc_sub2</span>, res <span class="op">=</span> <span class="fl">200</span>, cutline <span class="op">=</span> <span class="va">nc_sub2</span>,</span>
<span>  crop_to_cutline <span class="op">=</span> <span class="cn">TRUE</span>, out_class <span class="op">=</span> <span class="st">"stars"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">multi.ras</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">nc_sub1.terra</span>, <span class="va">nc_sub2.stars</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="va">f_sf</span>, res <span class="op">=</span> <span class="fl">200</span>, out_class <span class="op">=</span> <span class="st">"stars"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="reference/sciplot.html">sciplot</a></span><span class="op">(</span><span class="va">nc_sub1.terra</span>, pal <span class="op">=</span> <span class="st">"bamako"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">f_sf</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, border <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/sciplot.html">sciplot</a></span><span class="op">(</span><span class="va">nc_sub2.stars</span>, pal <span class="op">=</span> <span class="st">"vanimo"</span>, reset <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">f_sf</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, border <span class="op">=</span> <span class="st">"grey30"</span>, reset <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/sciplot.html">sciplot</a></span><span class="op">(</span><span class="va">multi.ras</span>, pal <span class="op">=</span> <span class="st">"romaO"</span>, reset <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">f_sf</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, border <span class="op">=</span> <span class="st">"grey30"</span>, reset <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-mixed-source-1.png" width="33%"><img src="reference/figures/README-mixed-source-2.png" width="33%"><img src="reference/figures/README-mixed-source-3.png" width="33%"></p>
<p>A rayshader-oriented matrix output class is also supported (i.e. North is up). This will return a matrix if the source has only one band (or only one is requested). A multidimensional array is returned when more than one band is present. The returned object includes <em>extent</em>, <em>dimension</em> and <em>projections</em> attributes. This can be useful if you plan to directly manipulate your data in R.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rayshader.com" class="external-link">rayshader</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get terrain as matrix</span></span>
<span><span class="va">nc_dtm.mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ezwarp.html">ezwarp</a></span><span class="op">(</span><span class="va">src</span>, <span class="va">jackson.mask</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">50</span>, out_class <span class="op">=</span> <span class="st">"rayshader"</span>, nodata <span class="op">=</span> <span class="op">-</span><span class="fl">999</span>,</span>
<span>  resample <span class="op">=</span> <span class="st">"lanczos"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">nc_dtm.mat</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://www.rayshader.com/reference/sphere_shade.html" class="external-link">sphere_shade</a></span><span class="op">(</span>texture <span class="op">=</span> <span class="st">"imhof4"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://www.rayshader.com/reference/add_shadow.html" class="external-link">add_shadow</a></span><span class="op">(</span><span class="fu"><a href="https://www.rayshader.com/reference/ray_shade.html" class="external-link">ray_shade</a></span><span class="op">(</span><span class="va">nc_dtm.mat</span>,</span>
<span>    zscale <span class="op">=</span> <span class="fl">10</span>, sunaltitude <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    sunangle <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  <span class="op">)</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://www.rayshader.com/reference/plot_3d.html" class="external-link">plot_3d</a></span><span class="op">(</span><span class="va">nc_dtm.mat</span>,</span>
<span>    zscale <span class="op">=</span> <span class="fl">10</span>, fov <span class="op">=</span> <span class="fl">130</span>, theta <span class="op">=</span> <span class="fl">50</span>, phi <span class="op">=</span> <span class="fl">20</span>, zoom <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    windowsize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">800</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://www.rayshader.com/reference/render_depth.html" class="external-link">render_depth</a></span><span class="op">(</span>focallength <span class="op">=</span> <span class="fl">300</span>, clear <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-rayshade-example-1.png" width="100%"></p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Permian-Global-Research/ezwarp/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Permian-Global-Research/ezwarp/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ezwarp</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Hugh Graham <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9451-5010" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://codecov.io/gh/Permian-Global-Research/ezwarp" class="external-link"><img src="https://codecov.io/gh/Permian-Global-Research/ezwarp/branch/main/graph/badge.svg?token=4I9PAMOY5I" alt="codecov"></a></li>
<li><a href="https://github.com/Permian-Global-Research/ezwarp/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/Permian-Global-Research/ezwarp/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Hugh Graham.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
